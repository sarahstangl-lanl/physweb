<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
 <html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr">
 <head>
     <title>Foyer Display 1 - School of Physics and Astronomy</title>
     <style>
      body {
        font-family: "Lucida Grande", Lucida, Helvetica, Arial, sans-serif;
        background: black; margin: 0; padding: 20px 0 0 40px;
      }
      #maincontainer {
        width:1840px;
        height:1040px;
        background: #111;
        margin: 0;
        position: absolute;
        overflow: hidden;
      }
      @font-face {
        font-family: myriadProBold;
        src: url(MyriadPro-Bold.otf)
      }
      @font-face {
        font-family: myriadProRegular;
        src: url(MyriadPro-Regular.otf)
      }
      @font-face {
        font-family: NeutraText-Demi;
        src: url(NeutraText-Demi.otf)
      }
      #headrow {
       height: 110px;
      }

      #headcell {
        overflow: hidden;
        padding:0;
        margin:0;
      }
      #spaheading {
        color: #fc3;
        font-size: 4em;
        font-weight: bold;
        text-align: center;
        width: 100%;
        height: 120px;
      }
      #middlerow {
        height: 870px;
      }
      #middletable {
         /* used to generate seperate news and events cells */
         width:100%; height: 100%;
         border-spacing:0;
         padding: 0;
         margin: 0;
      }
      #newscontainer {
        background: url(PhysicsBuilding-dark.jpg);
        position: absolute;
        height: 869px;
        width: 1232px;
        padding: 0;
        margin: 0;
        overflow: hidden;
      }
      #newsheading {
          font-size: 2.5em; font-weight: bold; margin-left: 0.7em;
          color: white;
      }
      div.floating-news-box {
         -moz-border-radius: 1.4em;
         border-radius: 1.4em;
         float: left;
         width: 528px;
         height: 730px;
         border: 2px solid black;
         margin-left: 15px;
         margin-right: 15px;
         padding: 25px;
         font-size: 1.6em;
         background-image: url(85-percent-opaque-white.png);
         overflow: hidden;
      }
      #newsslider {
         width: 9000px; /* More than big enough, its got hidden overflow */
         margin-left: 0px; /* Changed by javascript to rotate stories */
      }
      div.newsslider-headline {
        padding-top: 0.2em;
        font-size: 1.4em;
        /*font-weight:bold;*/
         font-family: myriadProBold;
      }
      div.newsimage {
         width: 527px;
         height: 250px;
         padding:0;
         margin:0;
         /*background-color: white;*/
         background-repeat: no-repeat;
         background-position: center center;
         border-radius: 18px 20px 0px 0px;
         -moz-border-radius: 18px 20px 0px 0px;
      }
      div.newscopy {
        display: inline;
        padding:0;
        margin: 0;
      }
      #newsfooter {
          font-size: 1.5em; font-weight: bold; margin-left: 0.7em;
          color: white;
      }
      .calendarcell {
        background: #ffde7a;
        background: #ffee8a;
        background: #ffdf99;
        width: 33%;
        border-left: 1px solid black;
        border-top: 1px solid black;
      }
      #calendar_container {
        height: 850px;
        overflow: hidden;
      }
      #calheading {
          font-size: 3em;
          font-weight: bold;
          width:100%;
          /*margin-left: 0.7em;*/
          text-align: center;
          display: none;
      }
      /* calendar */
      div.fpcalendar {
        padding: 1em;
        padding-top: 1.1em;
        /*padding-top: 0px;*/
        padding-bottom: 0;
      }

      div.fpcal_day {
        width: auto;
        padding-bottom: 0.5em;
      }
      div.fpcal_item {
        padding: 0.0em 0 0.4em 0;
      }
      div.fpcal_day_title {
        font-size: 2.6em;
        border-bottom: 2px solid #900;
        padding-bottom: 0.0em;
        margin-bottom: 0;
        clear: left;
      }

      div.fpcal_item {
        text-align: left;
        font-weight: normal;
        margin-top: 0.0em;
        font-size: 2.0em;
      }
      div.fpcal_title {
        margin-left: 5em;
        line-height: 1.3em;
      }
      div.fpcal_title a:visited, div.fpcal_title a:link {
        text-decoration: none !important;
        color: black;
      }

      div.fpcal_time {
        float: left;
        margin: 0; padding: 0;
        line-height: 1.3em;
      }
      div.fpcal_details {
        font-size: 0.9em;
        margin-left: 5em;
        padding-top: 0.3em;
        line-height: 1.0em;
        color: #666;
      }
      div.fpcal_speaker {
        padding:0; margin:0;
        display:inline;
        /*font-weight: bold;*/
      }
      div.fpcal_subject {
        font-style: italic;
        padding:0; margin:0;
        display:inline;
      }
      div.fpcal_nothing {
        font-size: 2.0em;
      }
      #footrow {
        height: 100%;
      }
      #footerbox {
        color:#bbf;
        padding-left: 1em;
        font-size: 1.4em;
        font-weight: bold;
      }
      #spotlighttext {
         color: red;
         float: right;
         padding-right: 0.5em;
         font-size: 1.4em;
      }
      #physurl {
        font-size: 1.3em;
        color: #eef;
      }
      #physurlphys {
        color: red;
        color: #c30;
      }

     </style>
     <script src="/include/js/prototype.js" type="text/javascript"></script>
     <script src="/include/js/scriptaculous.js?load=effects" type="text/javascript"></script>
     <script type="text/javascript">
        function slidenews(animate) {
            var duration = 0.8;
            var newstyle = "margin-left:-610px;";
            if(animate) {
            new Effect.Morph('newsslider', {
                  style: newstyle,
                  afterFinish: slidenews_reset,
                  duration: duration,
                  fps: 24
                  });
            }
            else {
                //$('newsslider').style.margin='0px 0px 0px 0px';
                slidenews_reset();
            }
            return false;
        }
        var newsItemDrydock = "newsitem3";
        function slidenews_reset() {
            //reset the articles
            var newsblock = $('newsslider');
            var firstarticle = newsblock.getElementsByTagName('div')[0];

            // Track which news item is in drydock
            newsItemDrydock = firstarticle.id;

            // Copy to drydock
            newsblock.appendChild(firstarticle.cloneNode(true));

            // Remove from front and reset scroll
            newsblock.removeChild(firstarticle);
            $('newsslider').style.margin='0px 0px 0px 0px';

            //Ajax in new content for drydock'd item
            getNextNewsItem();

            return false;
        }

        var lastNewsID = "";
        function getNextNewsItem() {
            var url="ajax_nextnews.html";
            var pars = "lastNewsID="+lastNewsID;
            var ajaxRequest = new Ajax.Request(url, {
                method: 'get',
                parameters: pars,
                asynchronus: true,
                onComplete:  getNextNewsItemComplete
            });
        }
        function getNextNewsItemComplete(xmlHttpRequest, responseHeader) {
            // set
            if(xmlHttpRequest.status == "200") {
                //DEBUG $('newsheading').innerHTML = "http 200 OK";

                if(xmlHttpRequest.responseJSON) {
                    // Pull number off end of "newsitem1"
                    var itemID = newsItemDrydock.substring(8);
                    var newsItem = $(newsItemDrydock);
                    var newsImage = $('newsimage'+itemID);
                    var newsHead = $('newshead'+itemID);
                    var newsCopy = $('newscopy'+itemID);

                    newsItem.newsID = xmlHttpRequest.responseJSON.id;
                    lastNewsID=newsItem.newsID;
                    newsImage.style.backgroundImage = "url("+xmlHttpRequest.responseJSON.imageUrl+")";
                    newsHead.innerHTML = xmlHttpRequest.responseJSON.headline;
                    newsCopy.innerHTML = xmlHttpRequest.responseJSON.copy;
                    //DEBUG $('newsheading').innerHTML = "Did replacement. "+itemID+", "+newsItem.newsID;
                }
                else {
                    //console.log("Invalid xmlHttpRequest (is not json)");
                    //DEBUG $('newsheading').innerHTML = "response did not contain JSON";
                }
            }
            else {
                // Not a 200 reply - something is broken. Just keep the old news item for now and do nothing.
                //DEBUG - remove in production!
                //console.log("Not a 200 reply.. wtf?");
                //DEBUG alert("in getNextNewsItemComplete(). response status is "+xmlHttpRequest.status);
            }

        }

        function getCalendarUpdate() {
            var url="calendar.html";
            var pars="";
            var ajaxRequest = new Ajax.Request(url, {
                method: 'get',
                parameters: pars,
                asynchronus: true,
                onComplete:  getCalendarUpdateComplete
            });
        }
        function getCalendarUpdateComplete(xmlHttpRequest, responseHeader) {
            //$('calheading').innerHTML = "DEBUG: in update complete...";
            var container = $('calendar_container');
            // WARNING: Arbitrary char minimum limit follows
            if(xmlHttpRequest.status == 200 && xmlHttpRequest.responseText.length > 100) {
                container.innerHTML = xmlHttpRequest.responseText;
            }
            //$('theClock').innerHTML = "DEBUG:"+xmlHttpRequest.responseText.length;
        }

        function updateClock() {

            var digital = new Date();
            var hours = digital.getHours();
            var minutes = digital.getMinutes();
            //var seconds = digital.getSeconds();
            var dn="pm";
            if(hours<12) {
              dn="am";
            }
            if(hours>12) {
                hours=hours-12;
            }
            if(hours ==0) {
                hours=12;
            }
            if(minutes<=9) {
                minutes="0"+minutes;
            }
            //if(seconds<=9) {
            //    seconds="0"+seconds;
            //}
            //$('theClock').innerHTML = hours+":"+minutes+":"+seconds+" "+dn;
            $('theClock').innerHTML = hours+":"+minutes+" "+dn;
        }

        setInterval("slidenews(1)", 30 * 1000);
        setInterval("getCalendarUpdate()", 1000 * 60);
        setInterval("updateClock()", 10 * 1000);

        // Hack to roll in new content on 1st page load
        setTimeout("slidenews(0)", 1000);
        setTimeout("slidenews(0)", 2000);
        setTimeout("slidenews(0)", 3000);
        setTimeout("getCalendarUpdate()", 1000);
     </script>
 </head>
 <body>
    <!-- width = 1920 minus padding (40 + 40) -->
    <div id="maincontainer">
    <!-- content of screen -->
        <table style="width: 100%; height:100%; margin:0; padding:0; border-spacing: 0">
        <tr id="headrow"><td id="headcell" valign="top" onclick="slidenews(1); return false;">
              <img src="SchoolHeader2.gif" border="none" />
        </td></tr>
        <tr id="middlerow"><td id="middlecell" style="border:0; margin:0; padding:0;" valign="top">
          <table id="middletable">
          <tr><td valign="top">
          <!-- NEWS Scroller -->
          <div id="newscontainer">
              <div id="newsheading">NEWS</div>
              <div id="newsslider">
                  <div id="newsitem1" class="floating-news-box">
                      <div id="newsimage1" class="newsimage"></div>
                      <div id="newshead1" class="newsslider-headline"></div>
                      <div id="newscopy1" class="newscopy"></div>
                  </div>
                  <div id="newsitem2" class="floating-news-box">
                      <div id="newsimage2" class="newsimage"></div>
                      <div id="newshead2" class="newsslider-headline"></div>
                      <div id="newscopy2" class="newscopy"></div>
                  </div>
                  <div id="newsitem3" class="floating-news-box">
                      <div id="newsimage3" class="newsimage"></div>
                      <div id="newshead3" class="newsslider-headline"></div>
                      <div id="newscopy3" class="newscopy"></div>
                  </div>
              </div> <!-- width 9000 -->
          </div>
          <!-- END NEWS Scroller -->
          </td>
          <td class="calendarcell" valign="top">
                <div id="calheading" onClick="getCalendarUpdate(); return false;">4:40:12 PM</div>
                <!-- Todays Talks Bullets -->
                <div id="calendar_container">
                </div> <!-- calendar_container -->
          </td></tr>
          </table>

        </td></tr>
        <tr id="footrow"><td valign="top" id="footcell">
        <div id="footerbox" style="text-align: center;">
            <div id="spotlighttext">Look over there, it's the Research Spotlight &mdash;&mdash;&gt;</div>
            <div style="float: left;">Visit <span id="physurl">www.<span id="physurlphys">physics</span>.umn.edu</span> to find out more</div>
            <div id="theClock" style="font-size: 1.0em; padding-top: 0.3em;">..loading.. </div>
        </div>
        </td></tr>
    <!-- end of content -->
    </div>
</body>
</html>
